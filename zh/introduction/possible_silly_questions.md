# 想问的一切问题

## 为什么不使用 MapReduce ？

我们可以将 map-reduce 作为一个分布式计算系统，其中的 reduce 操作基于分布式排序。它们包括：YAMR，Hadoop，以及 YT。

这类系统由于其高延迟而不适用于在线查询。因而不能作为 Web 界面的后端。
这些系统不支持对数据进行实时更新。
如果数据的中间结果可以放在单个节点的 RAM 中，通常在线分析是这样的情况，那么分布式排序并不是最好的方法来进行 reduce 操作。常用的优化 map-reduce 任务的方法是进行预聚合，通过在内存中存储一个哈希表。但这个依赖于用户的手工操作。
在进行 map-reduce 任务时，分布式排序是降低性能的主要原因之一。

诸如 map-reduce 之类的系统允许在集群上执行任何代码。但是为了快速运行实验，声明性查询语言更适合于 OLAP。 例如，Hadoop 有 Hive 和 Pig。 还要考虑 Cloudera Impala，Shark（过时的）Spark，以及 Spark SQL，Presto 和 Apache Drill。 运行此类任务时的性能与专用系统相比非常不理想，但相对较高的延迟使得将这些系统用作 Web 界面的后端并不现实。

YT 允许分开存储多组列。但是 YT 不能被认为是一个真正的基于列的系统，因为它没有固定长度的数据类型（用于有效地存储数字而没有额外的“垃圾”），并且也由于缺乏向量化引擎。任务在 YT 中使用流模式下的自定义代码执行，因此它们不能被优化（每台服务器每秒高达数亿行）。YT 正在开发 “动态表排序”，使用的是 MergeTree，严格的值类型和类似于SQL的查询语言。 动态排序的表不适用于 OLAP 任务，因为数据按行存储。 YT 查询语言仍在开发中，所以我们不能依赖这个功能。 YT 开发人员正在考虑在 OLTP 和 Key-Value 方案中使用动态分类表。
